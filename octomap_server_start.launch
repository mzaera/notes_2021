<!-- 
  Copy this file into your workspace and adjust as needed, see
  www.ros.org/wiki/octomap_server for details  
-->
<launch>

  <arg	name="node_start_delay"                   default="0.0"/>                 
  <arg	name="ground"                   					default="false"/>                 


	<node pkg="octomap_server" type="octomap_server_node" name="octomap_server" launch-prefix="bash -c 'sleep $(arg node_start_delay); $0 $@'">

		<param name="resolution" 										type="double" 	value="0.1" /> <!--0.05 -->
		<param name="frame_id" 											type="string" 	value="map" />
		<param name="base_frame_id" 								type="string" 	value="base_link" />
		<param name="height_map" 										type="bool" 		value="true" />
		<param name="sensor_model/max_range" 				type="double" 	value="500.0" /> <!--5.0 -->
		<param name="latch" 												type="bool" 		value="true" />
		<param name="filter_ground" 								type="bool" 		value="false" />
		<param name="ground_filter/distance" 				type="double" 	value="0.1" /> <!--0.04 -->
		<param name="ground_filter/angle " 					type="double" 	value="0.3" /> <!--0.15 -->
		<param name="ground_filter/plane_distance" 	type="double" 	value="0.1" /> <!--0.07 -->

		<remap unless="$(arg ground)" from="cloud_in" to="/rtabmap/cloud_obstacles" /> 
		<remap if="$(arg ground)" 		from="cloud_in" to="/rtabmap/octomap_occupied_space" /> 
	
	</node>

</launch>